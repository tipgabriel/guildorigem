<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guild Origem - AdventureQuest Worlds</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-base': '#171717',
                        'fire-start': '#FF8C00',
                        'fire-end': '#FF4500',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #171717;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .fire-gradient {
            background: linear-gradient(135deg, #FF8C00, #FF4500);
        }
        
        .fire-text {
            background: linear-gradient(135deg, #FF8C00, #FF4500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .fire-border {
            border: 2px solid transparent;
            background: linear-gradient(135deg, #171717, #171717), 
                        linear-gradient(135deg, #FF8C00, #FF4500);
            background-clip: padding-box, border-box;
            background-origin: padding-box, border-box;
        }
        
        .fire-button {
            background: linear-gradient(135deg, #FF8C00, #FF4500);
            color: white;
            transition: all 0.3s ease;
        }
        
        .fire-button:hover {
            background: linear-gradient(135deg, #FF4500, #FF8C00);
            box-shadow: 0 0 15px rgba(255, 69, 0, 0.5);
        }
        
        .member-card {
            background-color: #1f1f1f;
            transition: transform 0.3s ease;
        }
        
        .member-card:hover {
            transform: translateY(-5px);
        }
        
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }
        
        .progress-bar {
            background-color: #2a2a2a;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            transition: width 0.5s ease;
            background: linear-gradient(135deg, #FF8C00, #FF4500);
        }
        
        .google-login {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: white;
            color: #757575;
            border: 1px solid #dadce0;
            border-radius: 4px;
            padding: 10px 16px;
            font-size: 14px;
            font-weight: 500;
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        
        .google-login:hover {
            background-color: #f8f9fa;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .google-icon {
            width: 18px;
            height: 18px;
            margin-right: 8px;
        }
        
        .profile-banner {
            height: 200px;
            background: linear-gradient(135deg, #FF8C00, #FF4500);
        }
        
        .profile-picture {
            width: 120px;
            height: 120px;
            border: 4px solid #171717;
            margin-top: -60px;
        }
        
        .social-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .social-icon:hover {
            transform: translateY(-3px);
        }
        
        .smooth-scroll {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body class="bg-dark-base min-h-screen smooth-scroll">
    <!-- Cabeçalho -->
    <header class="sticky top-0 z-50 bg-dark-base border-b" style="border-image: linear-gradient(135deg, #FF8C00, #FF4500) 1;">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fas fa-dragon fire-text text-2xl"></i>
                <h1 class="text-2xl font-bold fire-text">Guild Origem</h1>
            </div>
            
            <div class="hidden md:flex space-x-6">
                <a href="#inicio" class="text-white hover:fire-text transition">Início</a>
                <a href="#membros" class="text-white hover:fire-text transition">Membros</a>
                <a href="#sobre" class="text-white hover:fire-text transition">Sobre</a>
                <a href="#eventos" class="text-white hover:fire-text transition">Eventos</a>
                <a href="#regras" class="text-white hover:fire-text transition">Regras</a>
            </div>
            
            <div class="flex items-center space-x-4">
                <button id="loginBtn" class="px-4 py-2 fire-button rounded font-bold">Entrar</button>
                <button id="profileBtn" class="px-4 py-2 bg-gray-700 text-white rounded font-bold hidden">Meu Perfil</button>
                <button id="logoutBtn" class="px-4 py-2 bg-red-600 text-white rounded font-bold hidden">Sair</button>
                <button id="menuBtn" class="md:hidden text-white">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Conteúdo Principal (visível quando não logado) -->
    <div id="mainContent">
        <!-- Banner Principal -->
        <section id="inicio" class="relative py-16 md:py-24 bg-gradient-to-r from-dark-base to-gray-900">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-4xl md:text-6xl font-bold mb-4 fire-text">Guild Origem</h2>
                <p class="text-xl md:text-2xl mb-8">Comunidade de AdventureQuest Worlds</p>
                
                <div class="max-w-2xl mx-auto bg-dark-base p-6 rounded-lg fire-border mb-8">
                    <h3 class="text-2xl font-bold mb-4 fire-text">Status da Guild</h3>
                    <div class="flex justify-between mb-2">
                        <span>Membros Ativos</span>
                        <span>58/140</span>
                    </div>
                    <div class="progress-bar mb-4">
                        <div class="progress-fill" style="width: 41.4%"></div>
                    </div>
                    <p class="text-sm text-gray-400">Precisamos de mais 82 membros para completar a guild!</p>
                </div>
                
                <button id="joinBtn" class="px-8 py-3 fire-button rounded-lg font-bold text-lg">Junte-se a Nós</button>
            </div>
        </section>

        <!-- Seção de Membros -->
        <section id="membros" class="py-16">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12 fire-text">Nossos Membros</h2>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    <!-- Card de Membro 1 -->
                    <div class="member-card rounded-lg p-4 fire-border">
                        <div class="flex items-center mb-4">
                            <div class="w-16 h-16 rounded-full bg-gray-700 flex items-center justify-center mr-4">
                                <i class="fas fa-user fire-text text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg">Dragomir</h3>
                                <p class="text-sm text-gray-400">Líder</p>
                            </div>
                        </div>
                        <div class="text-sm">
                            <p class="mb-1"><i class="fas fa-shield-alt fire-text mr-2"></i> Nível 100</p>
                            <p class="mb-1"><i class="fas fa-medal fire-text mr-2"></i> Rank: Mestre</p>
                            <p><i class="fas fa-clock fire-text mr-2"></i> Online há 2h</p>
                        </div>
                    </div>
                    
                    <!-- Outros cards de membros... -->
                </div>
            </div>
        </section>
    </div>

    <!-- Perfil do Usuário (visível quando logado) -->
    <div id="userProfile" class="hidden">
        <!-- Banner do Perfil -->
        <div class="profile-banner relative">
            <div class="container mx-auto px-4 h-full flex items-end pb-4">
                <h1 class="text-4xl font-bold text-white">Meu Perfil</h1>
            </div>
        </div>
        
        <!-- Conteúdo do Perfil -->
        <section class="py-8 bg-dark-base">
            <div class="container mx-auto px-4">
                <div class="flex flex-col md:flex-row">
                    <!-- Coluna da Esquerda - Informações do Usuário -->
                    <div class="md:w-1/3 mb-8 md:mb-0 md:pr-8">
                        <div class="bg-gray-800 rounded-lg p-6 fire-border text-center">
                            <img id="userPhoto" src="" alt="Foto do perfil" class="profile-picture rounded-full mx-auto mb-4">
                            <h2 id="userName" class="text-2xl font-bold fire-text mb-2">Nome do Usuário</h2>
                            <p id="userEmail" class="text-gray-400 mb-4">email@exemplo.com</p>
                            
                            <div class="flex justify-center space-x-4 mb-6">
                                <a href="#" class="social-icon bg-blue-600 text-white">
                                    <i class="fab fa-discord"></i>
                                </a>
                                <a href="#" class="social-icon bg-blue-400 text-white">
                                    <i class="fab fa-twitter"></i>
                                </a>
                                <a href="#" class="social-icon bg-red-600 text-white">
                                    <i class="fab fa-youtube"></i>
                                </a>
                            </div>
                            
                            <div class="mb-4">
                                <h3 class="text-lg font-bold fire-text mb-2">Estatísticas</h3>
                                <div class="space-y-2">
                                    <div class="flex justify-between">
                                        <span>Nível</span>
                                        <span id="userLevel" class="fire-text font-bold">1</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Rank</span>
                                        <span id="userRank" class="fire-text font-bold">Novato</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Membro desde</span>
                                        <span id="joinDate" class="fire-text font-bold">2023</span>
                                    </div>
                                </div>
                            </div>
                            
                            <button class="w-full py-2 fire-button rounded font-bold mt-4">Editar Perfil</button>
                        </div>
                    </div>
                    
                    <!-- Coluna da Direita - Bio e Atividades -->
                    <div class="md:w-2/3">
                        <div class="bg-gray-800 rounded-lg p-6 fire-border mb-6">
                            <h2 class="text-2xl font-bold fire-text mb-4">Biografia</h2>
                            <p id="userBio" class="text-gray-300 mb-4">Aventureiro dedicado em busca de desafios épicos e aliados leais. Sempre disposto a ajudar novos jogadores e enfrentar os bosses mais difíceis de Lore.</p>
                            <button class="py-2 px-4 fire-button rounded font-bold">Editar Bio</button>
                        </div>
                        
                        <div class="bg-gray-800 rounded-lg p-6 fire-border">
                            <h2 class="text-2xl font-bold fire-text mb-4">Atividades Recentes</h2>
                            <div class="space-y-4">
                                <div class="flex items-start">
                                    <div class="bg-gray-700 rounded-full p-2 mr-4">
                                        <i class="fas fa-trophy fire-text"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-bold">Boss Derrotado</h3>
                                        <p class="text-gray-400 text-sm">Você derrotou o Dragão Épico junto com sua party</p>
                                        <p class="text-gray-500 text-xs">Há 2 horas</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start">
                                    <div class="bg-gray-700 rounded-full p-2 mr-4">
                                        <i class="fas fa-users fire-text"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-bold">Evento da Guild</h3>
                                        <p class="text-gray-400 text-sm">Participou do torneio PvP da guild</p>
                                        <p class="text-gray-500 text-xs">Há 1 dia</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start">
                                    <div class="bg-gray-700 rounded-full p-2 mr-4">
                                        <i class="fas fa-level-up-alt fire-text"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-bold">Nível Alcançado</h3>
                                        <p class="text-gray-400 text-sm">Subiu para o nível 45</p>
                                        <p class="text-gray-500 text-xs">Há 3 dias</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal de Login -->
    <div id="loginModal" class="fixed inset-0 z-50 flex items-center justify-center modal-overlay hidden">
        <div class="bg-dark-base rounded-lg p-8 w-full max-w-md fire-border relative">
            <button id="closeLoginModal" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <i class="fas fa-times text-xl"></i>
            </button>
            
            <h2 class="text-2xl font-bold mb-6 text-center fire-text">Entrar na Guild</h2>
            
            <form id="loginForm" class="space-y-4">
                <div>
                    <label for="loginUsername" class="block mb-2">Nome de Usuário</label>
                    <input type="text" id="loginUsername" class="w-full p-3 bg-gray-800 rounded border border-gray-700 focus:border-orange-500 focus:outline-none" required>
                </div>
                
                <div>
                    <label for="loginPassword" class="block mb-2">Senha</label>
                    <input type="password" id="loginPassword" class="w-full p-3 bg-gray-800 rounded border border-gray-700 focus:border-orange-500 focus:outline-none" required>
                </div>
                
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <input type="checkbox" id="rememberMe" class="mr-2">
                        <label for="rememberMe">Lembrar-me</label>
                    </div>
                    
                    <a href="#" class="fire-text hover:underline">Esqueceu a senha?</a>
                </div>
                
                <div class="g-recaptcha" data-sitekey="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"></div>
                
                <button type="submit" class="w-full py-3 fire-button rounded font-bold mt-4">Entrar</button>
                
                <div class="relative my-4">
                    <div class="absolute inset-0 flex items-center">
                        <div class="w-full border-t border-gray-700"></div>
                    </div>
                    <div class="relative flex justify-center text-sm">
                        <span class="px-2 bg-dark-base text-gray-400">Ou entre com</span>
                    </div>
                </div>
                
                <button type="button" id="googleLogin" class="w-full google-login">
                    <svg class="google-icon" viewBox="0 0 24 24" width="18" height="18">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Continuar com Google
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <p class="text-gray-400">Não tem uma conta? <button id="showRegister" class="fire-text hover:underline">Registre-se</button></p>
            </div>
        </div>
    </div>

    <!-- Modal de Registro -->
    <div id="registerModal" class="fixed inset-0 z-50 flex items-center justify-center modal-overlay hidden">
        <div class="bg-dark-base rounded-lg p-8 w-full max-w-md fire-border relative">
            <button id="closeRegisterModal" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <i class="fas fa-times text-xl"></i>
            </button>
            
            <h2 class="text-2xl font-bold mb-6 text-center fire-text">Junte-se à Guild</h2>
            
            <form id="registerForm" class="space-y-4">
                <div>
                    <label for="registerUsername" class="block mb-2">Nome de Usuário</label>
                    <input type="text" id="registerUsername" class="w-full p-3 bg-gray-800 rounded border border-gray-700 focus:border-orange-500 focus:outline-none" required>
                </div>
                
                <div>
                    <label for="registerEmail" class="block mb-2">E-mail</label>
                    <input type="email" id="registerEmail" class="w-full p-3 bg-gray-800 rounded border border-gray-700 focus:border-orange-500 focus:outline-none" required>
                </div>
                
                <div>
                    <label for="registerPassword" class="block mb-2">Senha</label>
                    <input type="password" id="registerPassword" class="w-full p-3 bg-gray-800 rounded border border-gray-700 focus:border-orange-500 focus:outline-none" required>
                </div>
                
                <div>
                    <label for="registerConfirmPassword" class="block mb-2">Confirmar Senha</label>
                    <input type="password" id="registerConfirmPassword" class="w-full p-3 bg-gray-800 rounded border border-gray-700 focus:border-orange-500 focus:outline-none" required>
                </div>
                
                <div>
                    <label for="registerCharacter" class="block mb-2">Personagem Principal</label>
                    <input type="text" id="registerCharacter" class="w-full p-3 bg-gray-800 rounded border border-gray-700 focus:border-orange-500 focus:outline-none" required>
                </div>
                
                <div>
                    <label for="registerLevel" class="block mb-2">Nível</label>
                    <input type="number" id="registerLevel" class="w-full p-3 bg-gray-800 rounded border border-gray-700 focus:border-orange-500 focus:outline-none" min="1" max="100" required>
                </div>
                
                <div class="g-recaptcha" data-sitekey="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"></div>
                
                <div class="flex items-center">
                    <input type="checkbox" id="acceptRules" class="mr-2" required>
                    <label for="acceptRules">Eu li e aceito as <a href="#regras" class="fire-text hover:underline">regras da guild</a></label>
                </div>
                
                <button type="submit" class="w-full py-3 fire-button rounded font-bold mt-4">Registrar</button>
            </form>
            
            <div class="mt-6 text-center">
                <p class="text-gray-400">Já tem uma conta? <button id="showLogin" class="fire-text hover:underline">Faça login</button></p>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, signOut } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";
        import { getFirestore, collection, addDoc, getDocs, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC73QWVlYETv9f4AOPPyQZSCBPbBOa9Om4",
            authDomain: "guildorigem.firebaseapp.com",
            projectId: "guildorigem",
            storageBucket: "guildorigem.firebasestorage.app",
            messagingSenderId: "4949016851",
            appId: "1:4949016851:web:e51d6684bacba21c3edae6"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const googleProvider = new GoogleAuthProvider();

        // Funções de autenticação
        window.registerUser = async (email, password, username, character, level) => {
            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;
                
                // Salvar informações adicionais no Firestore
                await setDoc(doc(db, "users", user.uid), {
                    uid: user.uid,
                    username: username,
                    email: email,
                    character: character,
                    level: level,
                    joinDate: new Date(),
                    rank: "Novato",
                    bio: "Aventureiro dedicado em busca de desafios épicos e aliados leais."
                });
                
                alert("Conta criada com sucesso! Bem-vindo à Guild Origem!");
                closeRegisterModal();
                return user;
            } catch (error) {
                console.error("Erro no registro:", error);
                alert("Erro ao criar conta: " + error.message);
            }
        };

        window.loginUser = async (email, password) => {
            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;
                alert("Login realizado com sucesso!");
                closeLoginModal();
                return user;
            } catch (error) {
                console.error("Erro no login:", error);
                alert("Erro ao fazer login: " + error.message);
            }
        };

        window.loginWithGoogle = async () => {
            try {
                const result = await signInWithPopup(auth, googleProvider);
                const user = result.user;
                
                // Verificar se o usuário já existe no Firestore
                const userDoc = await getDoc(doc(db, "users", user.uid));
                
                // Se não existe, criar registro
                if (!userDoc.exists()) {
                    await setDoc(doc(db, "users", user.uid), {
                        uid: user.uid,
                        username: user.displayName || user.email.split('@')[0],
                        email: user.email,
                        character: "A definir",
                        level: 1,
                        joinDate: new Date(),
                        rank: "Novato",
                        bio: "Aventureiro dedicado em busca de desafios épicos e aliados leais."
                    });
                }
                
                alert("Login com Google realizado com sucesso!");
                closeLoginModal();
                return user;
            } catch (error) {
                console.error("Erro no login com Google:", error);
                alert("Erro ao fazer login com Google: " + error.message);
            }
        };

        window.logoutUser = async () => {
            try {
                await signOut(auth);
                alert("Logout realizado com sucesso!");
            } catch (error) {
                console.error("Erro no logout:", error);
                alert("Erro ao fazer logout: " + error.message);
            }
        };

        // Verificar estado de autenticação
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                console.log("Usuário logado:", user);
                document.getElementById('loginBtn').classList.add('hidden');
                document.getElementById('profileBtn').classList.remove('hidden');
                document.getElementById('logoutBtn').classList.remove('hidden');
                
                // Mostrar perfil do usuário
                document.getElementById('mainContent').classList.add('hidden');
                document.getElementById('userProfile').classList.remove('hidden');
                
                // Carregar dados do usuário
                const userDoc = await getDoc(doc(db, "users", user.uid));
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    document.getElementById('userName').textContent = userData.username;
                    document.getElementById('userEmail').textContent = userData.email;
                    document.getElementById('userLevel').textContent = userData.level;
                    document.getElementById('userRank').textContent = userData.rank;
                    document.getElementById('userBio').textContent = userData.bio;
                    
                    const joinDate = userData.joinDate.toDate();
                    document.getElementById('joinDate').textContent = joinDate.getFullYear();
                }
                
                // Foto do perfil (se disponível)
                if (user.photoURL) {
                    document.getElementById('userPhoto').src = user.photoURL;
                } else {
                    document.getElementById('userPhoto').src = "https://via.placeholder.com/120?text=USER";
                }
            } else {
                console.log("Usuário não logado");
                document.getElementById('loginBtn').classList.remove('hidden');
                document.getElementById('profileBtn').classList.add('hidden');
                document.getElementById('logoutBtn').classList.add('hidden');
                
                // Mostrar conteúdo principal
                document.getElementById('mainContent').classList.remove('hidden');
                document.getElementById('userProfile').classList.add('hidden');
            }
        });
    </script>

    <!-- JavaScript para funcionalidades da interface -->
    <script>
        // Elementos DOM
        const loginBtn = document.getElementById('loginBtn');
        const joinBtn = document.getElementById('joinBtn');
        const profileBtn = document.getElementById('profileBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const loginModal = document.getElementById('loginModal');
        const registerModal = document.getElementById('registerModal');
        const closeLoginModalBtn = document.getElementById('closeLoginModal');
        const closeRegisterModalBtn = document.getElementById('closeRegisterModal');
        const showRegister = document.getElementById('showRegister');
        const showLogin = document.getElementById('showLogin');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const googleLoginBtn = document.getElementById('googleLogin');

        // Funções para fechar modais
        function closeLoginModal() {
            loginModal.classList.add('hidden');
        }

        function closeRegisterModal() {
            registerModal.classList.add('hidden');
        }

        // Abrir modal de login
        loginBtn.addEventListener('click', () => {
            loginModal.classList.remove('hidden');
        });

        // Abrir modal de registro a partir do botão "Junte-se a Nós"
        joinBtn.addEventListener('click', () => {
            registerModal.classList.remove('hidden');
        });

        // Logout
        logoutBtn.addEventListener('click', () => {
            if (typeof window.logoutUser === 'function') {
                window.logoutUser();
            }
        });

        // Fechar modais
        closeLoginModalBtn.addEventListener('click', closeLoginModal);
        closeRegisterModalBtn.addEventListener('click', closeRegisterModal);

        // Alternar entre login e registro
        showRegister.addEventListener('click', () => {
            closeLoginModal();
            registerModal.classList.remove('hidden');
        });

        showLogin.addEventListener('click', () => {
            closeRegisterModal();
            loginModal.classList.remove('hidden');
        });

        // Fechar modais ao clicar fora
        window.addEventListener('click', (e) => {
            if (e.target === loginModal) {
                closeLoginModal();
            }
            if (e.target === registerModal) {
                closeRegisterModal();
            }
        });

        // Processar formulário de login
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            // Verificar reCAPTCHA
            const recaptchaResponse = grecaptcha.getResponse();
            if (!recaptchaResponse) {
                alert("Por favor, complete o reCAPTCHA");
                return;
            }
            
            // Usar função do Firebase para login
            if (typeof window.loginUser === 'function') {
                window.loginUser(email, password);
            } else {
                alert('Sistema de login em desenvolvimento. Use: ' + email + ' / ' + password);
                closeLoginModal();
            }
        });

        // Processar formulário de registro
        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const username = document.getElementById('registerUsername').value;
            const character = document.getElementById('registerCharacter').value;
            const level = document.getElementById('registerLevel').value;
            
            // Verificar se as senhas coincidem
            if (password !== document.getElementById('registerConfirmPassword').value) {
                alert('As senhas não coincidem!');
                return;
            }
            
            // Verificar reCAPTCHA
            const recaptchaResponse = grecaptcha.getResponse();
            if (!recaptchaResponse) {
                alert("Por favor, complete o reCAPTCHA");
                return;
            }
            
            // Usar função do Firebase para registro
            if (typeof window.registerUser === 'function') {
                window.registerUser(email, password, username, character, level);
            } else {
                alert('Sistema de registro em desenvolvimento. Dados: ' + username + ' / ' + email);
                closeRegisterModal();
            }
        });

        // Login com Google
        googleLoginBtn.addEventListener('click', () => {
            if (typeof window.loginWithGoogle === 'function') {
                window.loginWithGoogle();
            } else {
                alert('Login com Google em desenvolvimento');
            }
        });

        // Atualizar automaticamente o ano do copyright
        document.addEventListener('DOMContentLoaded', () => {
            // Suavizar rolagem para âncoras
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>
